#!/bin/bash


rm -f input_*_ec.txt

function getInput {
  #echo "getInput for $1"
  touch input_${i}_ec.txt
  for i in $1
  do
    if [[ "x$DIR2" != "x" ]]
    then
        #ls $DIR1/*_${i}.*/*tree.root*  $DIR2/*_${i}.*/*tree.root* >> input_${i}_ec.txt
        ls $DIR1/*_${i}*/*tree.root*  $DIR2/*_${i}*/*tree.root* $DIR3/*_${i}*/*tree.root* >> input_${i}_ec.txt
    else
        ls $DIR1/*_${i}*/*tree.root* >> input_${i}_ec.txt
    fi
  done
}

L=

# ttbar Powheg+Pythia
L="$L 117050"

# ttbar Powheg+Pythia HERAPDF
L="$L 117001"

# MC@NLO
L="$L 105200"

# systs
L="$L 117840 117842"
L="$L 105860 117209 117210"

# Sherpa
#L="$L 117800 117801 117802 117803 117804 117805 117806"

#Wjets filtered with Akt10
L="$L 190001 190002 190003 190004 190005 190011 190012 190013 190014 190015 190021 190022 190023 190024 190025 190050 190051 190052 190053 190040 190041 190042 190043 190030 190031 190032 190033 190034"
# Normal Wjets (use particle level pT cut to reject the overlap)
#L="$L 117680 117681 117682 117683 117684 117685 117690 117691 117692 117693 117694 117695 117700 117701 117702 117703 117704 117705 126601 126602 126603 126604 126605 126606 126607 126608 126609 110801 110802 110803 110804"
L="$L 147025 147026 147027 147028 147029 147030 147033 147034 147035 147036 147037 147038 147041 147042 147043 147044 147045 147046 200156 200157 200158 200159 200056 200057 200058 200059 200060 200256 200257 200258 200259"

# Zjets:
#L="117650 117651 117652 117653 117654 117655 117660 117661 117662 117663 117664 117665 117670 117671 117672 117673 117674 117675 110805 110806 110807 110808 110809 110810 110811 110812 110813 110814 110815 110816 110817 110818 110819 110820 110821 110822 110823 110824 110825 110826 110827 110828"
L="$L 147105 147106 147107 147108 147109 147110 200332 200333 200334 200335 200432 200433 200434 200435 147113 147114 147115 147116 147117 147118 147121 147122 147123 147124 147125 147126 200340 200341 200342 200343 200348 200349 200350 200351 200440 200441 200442 200443 200448 200449 200450 200451"
#diboson:
L="$L 105985 105986 105987"
#new single top
L="$L 110090 110091 110119 110140"

# BSM:
L="$L 110901 110902 110903 110904 110905 110906 110907 110908 110909"
#L="$L 115550 115551 115552 115553 119318 115554 119319 115555 115556 115799 119582 158768 158769 145583 145584 145585 145586 158765 158766 158767 158770 158771 158772 158773 158774 158775 158776"

L="$L 147913 147914 147915 147916 147917"

#sig
#L="158225 158226 158227 158228 158229 158230 158231 158232 158233 158234 158235 158236 158238 158240 158241 158242 158857 158858 158859 158860 158861 158862 158863 158865 158866 158867 158868 158869 158870 158871 158873 158874 180132 180134 180135 180136 180137 180138 180140 180141 180152 180153 180154 180155 180156 180157 180158 180159 180160 180161 180162"

#bkg
#L="$L 117690 117691 117692 117693 117694 117695 167773 167774 167775 167782 167783 167784 167791 167792 167793"

getInput "$L"

function doIt {
  counte=`root -l -q -b macros/countEvents.C+\(\"input_${1}_ec.txt\",$2\) | grep EVENT | awk '{print $3}'`
  root -l -q -b macros/writeEventCount.C+\(\"EventCount_${SUF}.root\",$2,${1},${counte}\)
}

rm -f EventCount_${SUF}.root

for i in $L
do
    doIt ${i} -1
done

for z in {0..1}
do
    doIt 117050 ${z}
done

#for z in {0..54}
#do
#  for i in $L
#  do
#      doIt ${i} ${z}
#  done
#done

rm -f input_*_ec.txt


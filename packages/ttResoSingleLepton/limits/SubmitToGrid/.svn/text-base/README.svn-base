===================================================================================
Set of macros to run HistFitter on the grid, sort output files and extract limits
--> Contains modified versions of some of the files in HistFitter/batch
Author: J K Behr
Date: 5 July 2014
===================================================================================

--------------
Step-by-step:
--------------
1) Prepare HistFitter input file from spectrum using tools in limits/formatting/
2) Setup HistFitter using modified files in limits/HistFitter/
3) Place input file in HistFitter/data/
4) Make tarball of HistFitter directory (HistFitter.tar.gz) and place it in limits/submitToGrid
5) Modify submitAll.sh: Specify HistFitter input and config files (see config/ directory), etc.
6) Modify submitHistFitter.sh: Specify grid container names and other prun parameters
7) Launch jobs: 'source submitAll.sh'


--------------
Useful hints:
--------------
HistFitter.tar.gz 
    - Contains a (cleaned) complete HistFitter version 
    - Includes Andrew's hacks (added to src/, python/ and scripts/)
      and formatted input file (in the data/ directory)
    - Must be present in order to launch jobs to the grid


ROOT setup for local runs:
    localSetupROOT --rootVersion 5.34.14-x86_64-slc6-gcc4.7


submitAll.sh:
    - Prepares and submits job with a number of configurations (signal models, excluded systematics, ...)
    - These configurations are defined in a config file from config/ (source'd by the macro)
    - Use config/QuickTest.sh to run limit setting with stats only

    - Further options (input file, HistFitterConfigFile, ...) are currently hard coded

    - Writes options into a settings file in settings/
    - Settings files are source'd by the run script runHistFitter.sh

    - Can be run locally by un-commenting line 97 --> calls run script runHistFitter.sh directly
    - Otherwise use line 96 to launch grid submission script submitHistFitter.sh
    
    
sortGridOutput.sh:
    - Need to set path to directory that contains the datasets downloaded from the grid
    - Unpacks the tarballs
    - Collects fit and limit plots and places them in a common Results/ directory
    
    
extractLimitsFromLogs.sh:
    - Extracts the limit numbers from the log files (in myResults/ of the output container from the grid)
    - Writes limit numbers into *.dat files in Results/Limits/LimitNumbers
    - These files are the input required by limits/plotting/draw_all_8TeV.sh to make the final limit plots